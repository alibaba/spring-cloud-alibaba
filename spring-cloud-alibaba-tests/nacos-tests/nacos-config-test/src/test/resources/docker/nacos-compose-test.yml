services:
  nacos:
    image: nacos/nacos-server:2.0.1
    container_name: nacos-standalone
    environment:
      - PREFER_HOST_MODE=hostname
      - MODE=standalone
    ports:
      - "8848:8848"
    healthcheck:
      test: "curl --fail http://127.0.0.1:8848/nacos/v1/console/health/liveness || exit 1"
      interval: 5s
  nacos-address:
    image: nacos/nacos-server:2.0.1
    container_name: nacos-address
    environment:
      - PREFER_HOST_MODE=hostname
      - MODE=standalone
      - SERVER=nacos-address
    ports:
      - "8080:8080"
    healthcheck:
      test: "curl --fail http://127.0.0.1:8080/nacos/v1/as/nodes || exit 1"
      interval: 5s